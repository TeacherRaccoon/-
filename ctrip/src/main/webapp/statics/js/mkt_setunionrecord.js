/*! 2019-07-09_14:13:28 sem.am@ctrip.com */
!function(win,doc){var _utils={setCooki:function(e,t,n){var o=n||90,i=new Date,r=t;i.setTime(i.getTime()+24*o*60*60*1e3),document.cookie=e+"="+r+";path=/;expires="+i.toUTCString()+";domain="+window.location.hostname.split(".").slice(-2).join(".")||"ctrip.com"},getCooki:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null},createScript:function(e,t){var n=document.createElement("script");n.type="text/javascript",n.async=t,n.charset="UTF-8",n.src=e;var o=document.getElementsByTagName("head")[0];o.appendChild(n)},Ajax:{obj:function(){var e;try{e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){throw"您的浏览器不支持AJAX"}return!1}}return e}(),httpSuccess:function(e){return e.status>=200&&e.status<300||304==e.status},serialize:function(e){var t=[];if(e){for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}},submitRequest:function(e){if(e){var t=this,n=t.obj;n.onreadystatechange=function(){4==n.readyState&&(t.httpSuccess(n)&&n.responseText?"function"==typeof e.success&&e.success(n.responseText):"function"==typeof e.error&&e.error(n.responseText))},n.open(e.type,e.url,e.async||!0),n.setRequestHeader("Content-type",e.contentType||"text/plain; charset=UTF-8"),e.withCredentials?(n.withCredentials=!0,n.setRequestHeader("cookieOrigin",window.location.origin)):n.withCredentials=!1,n.send(e.param)}}},getSoaDomain:function(){var e="",t=document.location.host,n=!!t.match("fat"),o=!!t.match("uat");return e=n?"mkt.ctrip.fat401.qa.nt.ctripcorp.com/":o?"mkt.ctrip.uat.qa.nt.ctripcorp.com/":"mkt.ctrip.com/"}},setNewCookie=function(){var _record=eval(decodeURIComponent(_utils.getCooki("Mkt_UnionRecord")))||[],_tempRecord=[],union=_utils.getCooki("Union");if(union&&union.indexOf("AllianceID=")>-1){var aid=union.split("AllianceID=")[1].split("&")[0],timestamp=(new Date).getTime(),flag=!1,deleteindex="";if(_record){for(var i=0;i<_record.length;i++)_record[i].aid&&(timestamp-_record[i].timestamp)/864e5<30&&_tempRecord.push(_record[i]);_record=_tempRecord}aid&&_record&&_record.forEach(function(e,t,n){aid==n[t].aid&&(flag=!0,deleteindex=t)});var new_union={aid:aid,timestamp:timestamp};flag&&_record.splice(deleteindex,1),_record.length<10?aid&&union&&_record.push(new_union):(_record[0]&&_record.shift(),union&&_record.push(new_union)),_utils.setCooki("Mkt_UnionRecord",encodeURIComponent(JSON.stringify(_record)),90)}},postRecord=function(e){},callAdeqoEvent=function(e){},init=function(){win.Mkt_UnionRecord={postRecord:postRecord,_callAdeqoEvent:callAdeqoEvent}};init()}(window,document);